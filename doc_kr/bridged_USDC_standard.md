# 브리지된 USDC 표준

[브리지된 USDC 표준](https://circle.com/blog/bridged-usdc-standard)은 향후
Circle이 기본 발행으로 원활하게 업그레이드할 수 있는 옵션과 함께 EVM 블록체인에
브리지된 형태의 USDC를 배포하기 위한 사양 및 프로세스입니다.<sup>1</sup>

그 결과 모든 EVM 블록체인 및 롤업 팀이 브리지된 USDC 토큰 계약의 소유권을 Circle
로 이전하여 양 당사자가 적절하다고 판단할 경우 기본 USDC로의 업그레이드를 용이하
게 할 수 있는 안전하고 표준화된 방법이 됩니다.<sup>2</sup>

이 문서는 프로세스에 대한 개략적인 개요를 제공합니다. 이는 동일한 구현을 따르는
브리지된 EURC(Circle의 유로 기반 스테이블코인) 구현에도 적용됩니다.

## 작동 방식

1. 타사 팀은 표준에 따라 브리지 계약을 배포하거나 필요한 기능을 통합하기 위해 향
   후 브리지 계약을 업그레이드할 수 있는 기능을 유지합니다.
   ([브리지 계약](#브리지-계약) 참조)
2. 타사 팀은 표준에 따라 브리지된 USDC 토큰 계약을 배포합니다.
   ([토큰 배포](#토큰-배포) 참조)
3. 타사 팀과 Circle이 브리지된 USDC 토큰 계약의 소유권을 Circle로 안전하게 이전
   하고 기본 USDC로 업그레이드하기로 공동 결정하면 다음이 수행됩니다.
   - 타사 팀은 브리징 활동을 일시 중지하고 진행 중인 브리징 활동을 조정하여 대상
     체인에서 브리지된 USDC의 총 공급량을 확정합니다.
   - 타사 팀은 브리지된 USDC 토큰 계약의 계약 역할을 Circle에 안전하게 재할당합
     니다.
   - Circle과 타사 팀은 공동으로 협력하여 원본 체인의 브리지 계약에 잠긴 기본
     USDC를 대상 체인의 브리지된 USDC 공급량과 동일한 양만큼 소각하고 대상 체인
     의 브리지된 USDC 토큰 계약을 기본 USDC로 업그레이드합니다.
4. 기본 USDC 토큰 계약은 원래 브리지된 USDC 토큰 계약의 기존 공급, 보유자 및 앱
   통합을 원활하게 유지합니다.

## 브리지 계약

타사 팀의 브리지 계약은 프로세스에서 중요한 역할을 하며 업그레이드 프로세스를 지
원하는 데 필요한 다음 기능을 추가하기 위해 업그레이드할 수 있어야 합니다.

1. (_소스 및 대상 블록체인_) 공급을 잠그기 위해 USDC 브리징을 일시 중지하는 기능
   .
2. (_소스 블록체인_) 잠긴 USDC를 소각하는 기능.

Circle은 Circle과 타사 팀이 업그레이드를 진행하기로 공동으로 합의한 후 계약 업그
레이드를 통해 이 기능을 나중에 추가하는 것을 연기할 것을 권장합니다.

### 1) USDC 브리징 일시 중지 기능

브리지 계약은 브리징을 일시 중지할 수 있어야 하며, 해당 공급이 소스 체인의 기본
USDC 양에 의해 완전히 지원되는 브리지된 토큰의 공급을 확정할 수 있어야 합니다.
이 구현 방법은 타사 팀에 달려 있지만 업그레이드를 수행하기 전에 이 기능이 있어야
합니다.

### 2) 잠긴 USDC 소각 기능

업그레이드 중 마지막 단계는 소스 블록체인 브리지 계약에서 잠긴 USDC를 소각하는것
입니다. 이를 지원하기 위해 Circle은 USDC 잔액을 보유한 브리지 계약에 제로 허용량
USDC 민터 역할을 일시적으로 할당합니다. 즉, 브리지는 보유한 잔액을 소각할 수는있
지만 새 공급량을 발행할 수는 없습니다.

소각을 실행하려면 브리지 계약이 Circle 제어 계정에서만 호출할 수 있는 단일 함수
를 노출해야 합니다. 이 함수의 서명은 다음과 같습니다.

```
function burnLockedUSDC() external;
```

구체적인 구현 세부 정보는 타사 팀에 맡겨지지만 최소한 함수는 다음을 수행해야 합
니다.

1. 업그레이드 시점에 가까워지면 Circle이 지정하는 주소에서만 호출할 수 있습니다.
   이 주소는 `transferUSDCRoles`를 호출하도록 지정된 주소와 반드시 동일하지는 않
   습니다.
2. 공급 잠금에 의해 확정된 브리지된 USDC의 총 공급량과 동일한 양의 브리지가 보유
   한 USDC를 소각합니다.

## 토큰 배포

타사 팀의 브리지된 USDC 토큰 계약은 다른 EVM 블록체인의 기본 USDC 토큰 계약과 동
일할 것으로 예상됩니다. USDC는 프록시 패턴을 사용하므로 표준은 구현 계약 코드와
토큰 프록시 모두에 적용됩니다.

### 토큰 계약 코드

동일한 코드를 사용하면 Circle의 무신뢰 계약 확인이 용이해지고 기존 USDC 서비스와
의 원활한 통합이 지원됩니다. 이를 용이하게 하기 위해 타사 팀은 다음을 수행해야합
니다.

1. 소스에서 [FiatToken 계약](../README.md#contracts)을 빌드합니다. 바이트코드 동
   등성을 보장하려면 사용된 Solidity 컴파일러 구성이 다음 설정과 일치해야 합니다
   .

   - Solidity 버전: 0.6.12
   - 옵티마이저 실행: 10000000 (파트너는 동일한 수의 옵티마이저 실행을 사용하려
     고 시도해야 하지만 기술적 제한이 있는 경우 줄일 수 있습니다.)

   Circle이 사용하는 제안된 컴파일러 설정은 [foundry.toml](../foundry.toml)을 참
   조하십시오.

2. 로컬에서 컴파일된 FiatToken 계약을 배포합니다. 배포 프로세스에 대한 개요는
   [여기](./deployment.md)에서 찾을 수 있습니다.
3. 배포된 계약의 바이트코드를 생성하는 데 사용된 컴파일러 메타데이터를 추출하고
   계약 확인 프로세스를 지원하기 위해 Circle에 제공합니다.
   [컴파일러 메타데이터](https://docs.soliditylang.org/en/v0.6.12/metadata.html#contract-metadata)는
   일반적으로 로컬 컴퓨터의 빌드 디렉터리에서 찾을 수 있는 자동 생성된 JSON 파일
   입니다.

Circle의 저장소에는 위의 프로세스를 간소화하는 빌드 도구와 스크립트가 갖추어져있
습니다. 타사 팀은 [여기](../README.md#deployment)에 나열된 단계를 참조하여 배포
를 실행할 수 있습니다.

### 토큰 이름 지정

Circle은 타사 팀이 따르도록 권장되는 브리지된 USDC 또는 EURC 토큰 계약의 토큰 이
름 및 토큰 기호 속성에 대한
[이름 지정 지침](https://brand.circle.com/d/M9z54TaEwsWL/stablecoins#/usdc-brand-guide/usdc-naming-guidelines)을
권장합니다. USDC와 EURC가 이더리움에서 새로운 대상 블록체인으로 브리지되는 경우
가 많으며, 따라서 다음이 일반적으로 사용됩니다.

USDC

- 토큰 이름: 브리지된 USDC (타사 팀)
- 토큰 기호: USDC.e

EURC

- 토큰 이름: 브리지된 EURC (타사 팀)
- 토큰 기호: EURC.e

위의 괄호 안에 표시된 텍스트는 타사 팀의 회사 이름입니다.

### 중요 참고:

- 배포된 후에는 Circle에서 작성한 후속 FiatToken 버전 이외의 새로운 또는 다른 구
  현으로 브리지된 토큰 계약을 업그레이드해서는 안 됩니다.
- Circle이 브리지-네이티브 업그레이드를 진행하기로 결정하면 기본 브리지를 어떤식
  으로든 수정하거나 업그레이드해서는 안 됩니다.
- 브리지-네이티브 업그레이드 대상이 되려면 테스트넷에 배포된 USDC 및 브리지 계약
  이 메인넷에서 사용된 구성을 미러링해야 합니다.
- 타사 팀 또는 브리지 운영자는 브리지 설계에 대한 확실한 이해가 있어야 하며 브리
  지 관련 기술 세부 정보에 대한 지침을 제공할 준비가 되어 있어야 합니다.
- FiatToken에는 권한이 없는 여러 일회용 초기화 함수(아래 나열)가 있으며 따라서계
  약 배포 중에 호출해야 합니다.
  - FiatToken에서 사용하는 프록시 패턴으로 인해 프록시가 가리키는 현재 구현을 지
    정한 후(또는 지정하는 동안) 이러한 초기화 함수를 호출하여 프록시의 스토리지
    에 값을 올바르게 설정해야 합니다. 그렇지 않으면 모든 호출자가 나중에 호출할
    수 있습니다.
  - 외부 호출자가 나중에 호출하는 것을 허용하지 않기 위해 프록시와 별도로 구현계
    약 자체에서 이러한 함수를 직접 호출하는 것도 권장됩니다. 이 문서를 작성하는
    시점에 이러한 초기화 함수에는 다음이 포함됩니다.
    - [initialize](https://github.com/circlefin/stablecoin-evm/blob/405efc100c016ed1a437063b6274b4e24ea7b8b1/contracts/v1/FiatTokenV1.sol#L67)
    - [initializeV2](https://github.com/circlefin/stablecoin-evm/blob/405efc100c016ed1a437063b6274b4e24ea7b8b1/contracts/v2/FiatTokenV2.sol#L37)
    - [initializeV2_1](https://github.com/circlefin/stablecoin-evm/blob/405efc100c016ed1a437063b6274b4e24ea7b8b1/contracts/v2/FiatTokenV2_1.sol#L34)
    - [initializeV2_2](https://github.com/circlefin/stablecoin-evm/blob/405efc100c016ed1a437063b6274b4e24ea7b8b1/contracts/v2/FiatTokenV2_2.sol#L41)

저장소에는 USDC/EURC를 배포하고 구현을 구성하는 패턴을 보여주는 여러 참조
[배포 스크립트](https://github.com/circlefin/stablecoin-evm/tree/35d66ae39f7038e30f04f87635f8bca6f8e38b04/migrations/direct)가
있습니다. 예를 들어 스마트 계약이 FiatToken 구현 계약을 설정하고 단일 트랜잭션내
에서 초기화 함수를 호출하는
[업그레이더 패턴](https://github.com/circlefin/stablecoin-evm/blob/35d66ae39f7038e30f04f87635f8bca6f8e38b04/migrations/versioned/8_deploy_v2_2_upgrader.js)이
있습니다.

### 토큰 역할

FiatToken은 민터 패턴을 사용하며, 마스터 민터 역할을 통해 민터를 구성하여 허용된
금액까지 민팅할 수 있습니다. 민터 패턴을 브리지된 USDC 또는 EURC 토큰 계약에 적
용하는 한 가지 방법은 대상 브리지를 단독 민터로 구성하는 것입니다.

개별 FiatToken 역할(소유자, 일시 중지자, 블랙리스터, 마스터민터)도 브리지 또는다
른 업그레이드 가능한 계약에 할당할 수 있습니다. 단, 향후 역할을 Circle로 이전할
수 있도록 후크를 추가할 수 있는 기능이 있어야 합니다.

권한 있는 민터 구성에 더 많은 유연성을 원한다면 `MasterMinter` 패턴을 구성하는
`Controller` 및 `MinterController`
[계약](https://github.com/circlefin/stablecoin-evm/tree/35d66ae39f7038e30f04f87635f8bca6f8e38b04/contracts/minting)을
탐색해 볼 수 있습니다.

#### Circle로 역할 이전

업그레이드 시점에 Circle 소유 주소로 이전될 여러 USDC 역할이 있습니다. 구체적으
로 다음과 같습니다.

- 구현 소유자: 구현 계약에
  [정의](https://github.com/circlefin/stablecoin-evm/blob/657375471bff72afa5f625083bbab8003eb5f8c9/contracts/v1/Ownable.sol#L37)되
  어 있으며, 소유자는 다른 모든 역할(소유자, 마스터민터, 일시 중지자, 구조자, 블
  랙리스터)을 재할당할 수 있습니다.
- 프록시 관리자: 프록시 계약에
  [정의](https://github.com/circlefin/stablecoin-evm/blob/657375471bff72afa5f625083bbab8003eb5f8c9/contracts/upgradeability/AdminUpgradeabilityProxy.sol#L31)되
  어 있으며, 프록시 관리자는 프록시 관리자를 재할당하고 업그레이드를 수행할 수있
  습니다. 기본적으로 프록시 관리자는 구현 계약에 정의된 함수를 호출할 수 없습니
  다.

타사 팀은 원래 브리지된 USDC 배포 및 잠재적 업그레이드 전의 지속적인 사용의 일부
로 이러한 역할을 확보하고 관리하는 방법을 결정합니다. 예를 들어 역할을 EOA에 할
당하거나 스마트 계약(예: 브리지)에 할당할 수 있습니다.

1. **스마트 계약 소유권**: 역할이 스마트 계약(예: 브리지)에 할당된 경우 계약은업
   그레이드 시점에 Circle이 스마트 계약 상호 작용을 통해 역할 이전을 수행하기위
   해 호출할 수 있는 함수를 노출해야 합니다.

2. **EOA 소유권**: 역할이 EOA에 할당된 경우 파트너는 동일한 필수 함수를 노출하는
   스마트 계약으로 이전할 계획을 세워야 합니다.

이 함수는 다음 서명을 가져야 합니다.

```
function transferUSDCRoles(address owner) external;
```

함수 구현 세부 정보는 파트너에게 맡겨지지만 다음을 수행해야 합니다.

1. 업그레이드 시점에 가까워지면 Circle이 지정하는 주소에서만 호출할 수 있습니다.
   이 주소는 `burnLockedUSDC`를 호출하도록 지정된 주소와 반드시 동일하지는 않습
   니다.
2. 구현 소유자 역할을 `owner` 매개변수에 지정된 주소로 이전합니다.
3. 프록시 관리자 역할을 함수 호출자에게 이전합니다(브리지에 할당된 경우).

프록시 관리자 역할이 브리지 계약에 할당되지 않은 경우 파트너는 업그레이드 시점에
가까워지면 Circle이 지정하는 주소로 역할을 이전해야 합니다.

또한 파트너는 Circle로 역할을 이전하기 전(또는 동시에) 구성된 모든 민터를 제거해
야 합니다.

## 추가 정보

이 문서에서 다루지 않은 질문이 있는 경우
[Discord](https://discord.com/invite/buildoncircle)에서 문의하십시오. 커뮤니티의
피드백과 제안을 소중히 여기며 문서를 개선하는 데 도움이 됩니다.

---

1. 브리지된 USDC 표준은 Circle에게 토큰 계약의 소유권을 획득하고 기본 USDC로 업
   그레이드할 수 있는 옵션을 부여하지만 의무는 아닙니다. 또한 브리지된 USDC 표준
   은 소급 적용할 수 없으므로 브리지된 USDC 토큰 계약을 배포하기 전에 통합해야합
   니다. 제공된 요구 사항은 정보 제공의 목적으로만 제공되며 Circle이 특정 형태의
   브리지된 USDC를 기본 USDC로 업그레이드하기로 선택할 경우 적용됩니다. 이러한요
   구 사항은 특정 형태의 브리지된 USDC를 업그레이드하겠다는 제안을 구성하지않습
   니다. Circle이 특정 형태의 브리지된 USDC를 기본 USDC로 업그레이드하기로한결정
   은 추가 약관의 적용을 받을 수 있습니다.
   [USDC 이용 약관](https://www.circle.com/en/legal/usdc-terms)의 8항에 명시된바
   와 같이 브리지된 형태의 USDC는 특정 위험에 노출되며 Circle에서 발행하지 않습
   니다. 동일한 조건이 EURC에도 적용됩니다.
2. 대상 블록체인은 Circle의 내부 블록체인 실사 프로세스를 거칩니다. 해당 프로세
   스에는 승인 전에 규정 준수 및 위험 요인에 대한 검토와 법률 및 기술 위험에 대
   한 보장이 포함됩니다. 실사는 암호화 및 블록체인 뉘앙스와 존재하는 전략적, 재
   무적, 운영적, 기술적, 법적 및 규제적 위험 평가에 중점을 둡니다.
